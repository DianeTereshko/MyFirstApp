@using Blog.Services.Models
@using Microsoft.AspNetCore.Identity
@model IList<Blog.Services.Models.Category>
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager

<!-- PC Header Start -->
<header class="w3-row w3-padding w3-hide-small">
    <div class="w3-bar w3-black w3-border">
        <a asp-area="Main" asp-controller="Default" asp-action="Index" class="w3-bar-item w3-button w3-ext-animate-button">ArrayList</a>
        <div class="w3-dropdown-hover w3-right">
            <partial name="_LoginPartial" id="_LoginPartial" />

        </div>
        <a href="#" id="LinkToSearch" class="w3-bar-item w3-button w3-amber w3-right w3-ext-animate-button">Найти</a>
        <form id="myform" asp-area="Main" asp-controller="Default" asp-action="Search" method="post">
            <input type="text" id="search" name="search" class="w3-bar-item w3-input w3-right" placeholder="Поиск по сайту .." onfocus="this.value = ' '">
        </form>
        @foreach (var category in Model)
        {
            <div class="w3-dropdown-hover w3-right">
                <button class="w3-button w3-ext-animate-button">@category.Name<i class="fa fa-caret-down"></i></button>
                <div class="w3-dropdown-content w3-bar-block w3-dark-grey">
                    @foreach (var subcategory in category.SubCategory.OrderBy(c => c.Name))
                    {
                        <a asp-area="Main" asp-controller="Default" asp-action="SubCategory" asp-route-subcategory="@subcategory.Id" asp-route-paging="1" class="w3-bar-item w3-button w3-ext-animate-button">@subcategory.Name</a>
                    }
                </div>
            </div>
        }
    </div>
</header>
<!-- PC Header End -->

<!-- SmartPhone Header Start -->
<header class="w3-row w3-padding w3-hide-large w3-hide-medium ">
    <div asp-area="Main" asp-controller="Default" asp-action="Index" class="w3-bar-item w3-button w3-ext-animate-button w3-mobile w3-hide-large w3-hide-medium">
        <span>ARRAYLIST</span>
        <a class="w3-bar-item w3-button w3-ext-animate-button w3-right" onclick="toggleMenu()">&#9776;</a>
    </div>
    <div id="menu" class="w3-hide">
        <form id="myform2" asp-area="Main" asp-controller="Default" asp-action="Search" method="post">
            <input type="text" id="search2" name="search" class="w3-bar-item w3-input" placeholder="Поиск по сайту .." onfocus="this.value = ' '">
        </form>
        @{
            int i = 100;
        }
        @foreach (var category in Model)
        {
            <div class="w3-center w3-dark-grey ">
                <button class="w3-button w3-ext-animate-button" onclick="showMenu(@category.Id, @i)">@category.Name<i id="@i" class="fas fa-caret-down"></i></button>
                <div id="@category.Id" class="w3-container w3-hide w3-dark-grey w3-center">
                    @foreach (var subcategory in category.SubCategory.OrderBy(c => c.Name))
                    {
                        <a asp-area="Main" asp-controller="Default" asp-action="SubCategory" asp-route-subcategory="@subcategory.Id" asp-route-paging="1" class="w3-button w3-ext-animate-button w3-mobile">@subcategory.Name</a>
                        i++;
                    }
                </div>
            </div>
        }
        @if (!SignInManager.IsSignedIn(User))
        {
            <div class="w3-center w3-dark-grey ">
                <a asp-area="Identity" asp-page="/Account/Login" class="w3-bar-item w3-button w3-ext-animate-button">Войти</a>
            </div>
        }
    </div>
</header>
<!-- SmartPhone Header End -->

